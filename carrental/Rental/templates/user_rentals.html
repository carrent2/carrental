{% extends "base.html" %}

{% block title %}Moje rezerwacje {% if user.is_authenticated %}{{ user.username }}{% endif %}{% endblock %}

{% block content %}
    {% if user.is_authenticated %}
    <h1 class="user-rentals-header">Moje rezerwacje</h1>
    <ul class="user-rentals-list">
        {% for rental in rentals %}
            <li class="user-rental-item">
                <div class="user-car-details">
                    <img src="{{ rental.car.image.url }}" alt="{{ rental.car.brand }} {{ rental.car.model }}">
                </div>
                <div class="user-car-info">
                    <h2>{{ rental.car.brand }} {{ rental.car.model }}</h2>
                    <p class="user-rental-date">Data rozpoczęcia: {{ rental.start_date }}</p>
                    <p class="user-rental-date">Data zakończenia: {{ rental.end_date }}</p>
                    <p class="user-price">Cena: PLN {{ rental.calculate_rental_price }}</p>
                    <form action="{% url 'cancel_rental' rental.id %}" method="post">
                        {% csrf_token %}
                        <input type="submit" value="Anuluj rezerwację" class="user-cancel-btn">
                    </form>
                    <a href="{% url 'rental_detail' rental.id %}" class="user-details-btn">SZCZEGÓŁY</a>
                </div>
            </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>Proszę <a href="{% url 'login' %}">zalogować się</a>, aby zobaczyć swoje rezerwacje.</p>
    {% endif %}
{% endblock %}




